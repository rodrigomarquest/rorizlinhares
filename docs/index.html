
<!DOCTYPE html>
<html lang="en" class="transition-colors duration-300">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Clínica Roriz Linhares – Booking & Engagement</title>
    <!-- Tailwind via CDN (prototype) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = { darkMode: 'class' };
    </script>
  </head>
  <body class="bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-100 min-h-screen flex flex-col items-center p-4">
    <!-- Role selection overlay (first visit) -->
    <section id="roleOverlay" class="fixed inset-0 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm flex flex-col justify-center items-center gap-8 z-50 hidden">
      <div class="text-center">
        <h2 id="txtWelcome" class="text-2xl font-bold mb-2">Welcome!</h2>
        <p id="txtSelectRole" class="text-gray-600 dark:text-gray-400">Please select your role:</p>
      </div>
      <div class="flex flex-col sm:flex-row gap-4">
        <button id="btnPatient" class="px-6 py-3 rounded-xl bg-emerald-600 text-white font-medium hover:bg-emerald-700 transition">I'm a Patient</button>
        <button id="btnStaff" class="px-6 py-3 rounded-xl bg-indigo-600 text-white font-medium hover:bg-indigo-700 transition">I'm Staff</button>
      </div>
    </section>

    <!-- Header with theme, language & logoff -->
    <header class="w-full max-w-3xl mb-6 flex items-center justify-between">
      <div class="text-center flex-1">
        <h1 class="text-3xl font-bold mb-1">Clínica Roriz Linhares</h1>
        <p id="txtSubtitle" class="text-lg text-gray-600 dark:text-gray-400">Self‑service booking & engagement dashboard</p>
      </div>
      <div class="flex items-center gap-3 ml-4">
        <!-- Language switch -->
        <button id="langEn" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition text-xl" title="English">🇬🇧</button>
        <button id="langPt" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition text-xl" title="Português">🇧🇷</button>
        <button id="langEs" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition text-xl" title="Español">🇪🇸</button>
        <!-- Theme toggle -->
        <button id="themeToggle" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition" title="Theme">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path id="iconThemePath" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364-6.364l-.707.707M6.343 17.657l-.707.707m0-12.728l.707.707M17.657 17.657l.707.707M12 5a7 7 0 000 14 7 7 0 000-14z" />
          </svg>
        </button>
        <!-- Logoff -->
        <button id="logoff" class="p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-800 transition" title="Change role">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-600 dark:text-red-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h6a2 2 0 012 2v1" />
          </svg>
        </button>
      </div>
    </header>

    <!-- Booking Wizard -->
    <section id="booking" class="w-full max-w-3xl bg-white dark:bg-gray-800 shadow rounded-2xl p-6 mb-8">
      <h2 id="txtNewAppt" class="text-xl font-semibold mb-4 flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
        New Appointment
      </h2>
      <form id="bookingForm" class="grid gap-4 sm:grid-cols-3">
        <input type="text" id="patientName" placeholder="Patient name" class="col-span-3 sm:col-span-1 border rounded p-2 bg-transparent" required />
        <input type="date" id="apptDate" class="col-span-3 sm:col-span-1 border rounded p-2 bg-transparent" required />
        <input type="time" id="apptTime" class="col-span-3 sm:col-span-1 border rounded p-2 bg-transparent" required />
        <button type="submit" id="btnAdd" class="col-span-3 bg-emerald-600 hover:bg-emerald-700 text-white font-semibold py-2 rounded-lg transition">Add Booking</button>
      </form>
    </section>

    <!-- Appointments List -->
    <section id="appointments" class="w-full max-w-3xl bg-white dark:bg-gray-800 shadow rounded-2xl p-6 mb-8 hidden">
      <h2 id="appointmentsHeader" class="text-xl font-semibold mb-4"></h2>
      <ul id="appointmentsList" class="space-y-4"></ul>
      <p id="emptyState" class="text-gray-500 dark:text-gray-400 text-center">No appointments yet.</p>
    </section>

    <footer class="text-sm text-gray-500 dark:text-gray-400 mt-auto py-6">
      Prototype for MSc AI4B – Customer Engagement & AI · Built with ❤️ & JavaScript
    </footer>

    <script>
      /* Keys & utilities */
      const KEYS={ROLE:'crl_role',NAME:'crl_name',APPTS:'crl_appts',THEME:'crl_theme',LANG:'crl_lang'};
      const $=s=>document.querySelector(s); const root=document.documentElement;

      /* I18N */
      const I18N={en:{welcome:'Welcome!',selectRole:'Please select your role:',patient:"I'm a Patient",staff:"I'm Staff",subtitle:'Self‑service booking & engagement dashboard',newAppt:'New Appointment',patientPh:'Patient name',add:'Add Booking',all:'All Upcoming Sessions',mine:'My Upcoming Sessions',none:'No appointments yet.'},
                  pt:{welcome:'Bem‑vindo!',selectRole:'Selecione seu papel:',patient:'Sou Paciente',staff:'Sou Funcionário',subtitle:'Agendamento e engajamento de pacientes',newAppt:'Novo Agendamento',patientPh:'Nome do paciente',add:'Agendar',all:'Próximas Sessões',mine:'Minhas Sessões',none:'Nenhum agendamento.'},
                  es:{welcome:'¡Bienvenido!',selectRole:'Seleccione su rol:',patient:'Soy Paciente',staff:'Soy Empleado',subtitle:'Panel de reservas y compromiso',newAppt:'Nueva Cita',patientPh:'Nombre del paciente',add:'Agendar',all:'Próximas Sesiones',mine:'Mis Sesiones',none:'Sin citas.'}};

      function t(k){const l=localStorage.getItem(KEYS.LANG)||'en';return I18N[l][k];}

      /* Theme */
      function setTheme(th){th==='dark'?root.classList.add('dark'):root.classList.remove('dark');localStorage.setItem(KEYS.THEME,th);$('#iconThemePath').setAttribute('d',th==='dark'?'M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z':'M12 3v1m0 16v1m9-9h-1M4 12H3m15.364-6.364l-.707.707M6.343 17.657l-.707.707m0-12.728l.707.707M17.657 17.657l.707.707M12 5a7 7 0 000 14 7 7 0 000-14z');}

      /* Lang */
      function applyLang(){ $('#txtWelcome').textContent=t('welcome'); $('#txtSelectRole').textContent=t('selectRole'); $('#btnPatient').textContent=t('patient'); $('#btnStaff').textContent=t('staff'); $('#txtSubtitle').textContent=t('subtitle'); $('#txtNewAppt').childNodes[2].textContent=' '+t('newAppt'); $('#patientName').placeholder=t('patientPh'); $('#btnAdd').textContent=t('add'); $('#emptyState').textContent=t('none'); render(); }

      /* Storage helpers */
      const load=()=>JSON.parse(localStorage.getItem(KEYS.APPTS)||'[]'); const save=d=>localStorage.setItem(KEYS.APPTS,JSON.stringify(d));

      /* UI helpers */
      function setupRole(role){
        localStorage.setItem(KEYS.ROLE,role); $('#roleOverlay').classList.add('hidden');
        if(role==='staff'){$('#patientName').parentElement.classList.remove('hidden');$('#appointmentsHeader').textContent=t('all');}else{$('#patientName').parentElement.classList.add('hidden');$('#appointmentsHeader').textContent=t('mine'); if(!localStorage.getItem(KEYS.NAME)){localStorage.setItem(KEYS.NAME',prompt('Name')||'Anonymous');} $('#patientName').value=localStorage.getItem(KEYS.NAME');}
        render();
      }

      function render(){
        const role=localStorage.getItem(KEYS.ROLE); const me=localStorage.getItem(KEYS.NAME);
        let appts=load().sort((a,b)=>new Date(a.dt)-new Date(b.dt));
        if(role==='patient') appts=appts.filter(a=>a.n===me);
        const list=$('#appointmentsList'); list.innerHTML='';
        if(!appts.length){$('#emptyState').classList.remove('hidden');return;} $('#emptyState').classList.add('hidden');
        appts.forEach((a,i)=>{const li=document.createElement('li');li.className='flex justify-between items-center border-b pb-2 last:border-b-0';li.innerHTML=`<div><p class="font-medium">${a.n}</p><p class="text-sm text-gray-500 dark:text-gray-400">${new Date(a.dt).toLocaleString()}</p></div>${role==='staff'?`<button data-i="${i}" class="del text-red-600 hover:text-red-800">Cancel</button>`:''}`;list.appendChild(li);});
      }

      /* Events */
      $('#btnPatient').onclick=()=>setupRole('patient'); $('#btnStaff').onclick=()=>setupRole('staff');
      $('#bookingForm').onsubmit=e=>{e.preventDefault();const role=localStorage.getItem(KEYS.ROLE);const name=role==='staff'?$('#patientName').value.trim():localStorage.getItem(KEYS.NAME);if(!name)return;const dt=$('#apptDate').value+'T'+$('#apptTime').value; const appts=load();appts.push({n:name,dt});save(appts); e.target.reset(); if(role==='patient')$('#patientName').value=name;render();};
      $('#appointmentsList').onclick=e=>{if(e.target.matches('.del')){const appts=load();appts.splice(e.target.dataset.i,1);save(appts);render();}};
      $('#themeToggle').onclick=()=>setTheme(root.classList.contains('dark')?'light':'dark');
      $('#langEn').onclick=()=>{localStorage.setItem(KEYS.LANG,'en');applyLang();}; $('#langPt').onclick=()=>{localStorage.setItem(KEYS.LANG,'pt');applyLang();}; $('#langEs').onclick=()=>{localStorage.setItem(KEYS.LANG,'es');applyLang();};
      $('#logoff').onclick=()=>{localStorage.removeItem(KEYS.ROLE);localStorage.removeItem(KEYS.NAME);$('#roleOverlay').classList.remove('hidden');};

      /* Init */
      setTheme(localStorage.getItem(KEYS.THEME)||'light'); applyLang(); if(localStorage.getItem(KEYS.ROLE)){setupRole(localStorage.getItem(KEYS.ROLE));}else{$('#roleOverlay').classList.remove('hidden');}
    </script>
  </body>
</html>
